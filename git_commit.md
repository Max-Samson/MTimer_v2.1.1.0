# Git 提交规范

## 🎯 提交格式

```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

## 📝 提交类型 (Type)

| 类型 | 图标 | 描述 | 示例 |
|------|------|------|------|
| `feat` | ✨ | 新功能 | `feat: 添加用户登录功能` |
| `fix` | 🐛 | 修复问题 | `fix: 修复计时器精度问题` |
| `docs` | 📚 | 文档变更 | `docs: 更新README安装说明` |
| `style` | 💄 | 代码风格 | `style: 格式化组件代码` |
| `refactor` | 🔄 | 代码重构 | `refactor: 重构时间计算逻辑` |
| `perf` | ⚡ | 性能优化 | `perf: 优化数据加载性能` |
| `test` | 🧪 | 测试相关 | `test: 添加单元测试` |
| `build` | 🏗️ | 构建相关 | `build: 更新构建配置` |
| `ci` | 👷 | CI配置 | `ci: 配置GitHub Actions` |
| `chore` | 🔧 | 其他维护 | `chore: 更新依赖包` |
| `revert` | ⏪️ | 回滚提交 | `revert: 回滚上个版本` |
| `merge` | 🔀 | 分支合并 | `merge: 合并develop分支` |
| `hotfix` | 🚑 | 紧急修复 | `hotfix: 修复生产环境崩溃` |

## 🔍 规范规则

### 必填规则
- ✅ 提交类型 (`type`) 必须选择
- ✅ 主题描述 (`subject`) 不能为空
- ✅ 主题描述不能超过50个字符
- ✅ 提交头部总长度不能超过72个字符

### 可选规则
- 🔄 范围 (`scope`) 可选，用于标识修改的具体模块
- 💬 详细描述 (`body`) 可选，用于详细说明变更内容
- 🏷️ 脚注 (`footer`) 可选，用于关联问题编号

## 📋 示例提交

### 基础提交
```
feat: 添加音乐播放功能
fix: 修复统计图表显示错误
docs: 更新API文档
```

### 带范围的提交
```
feat(timer): 添加自定义计时器设置
fix(ui): 修复按钮样式问题
refactor(db): 重构数据库连接逻辑
```

### 完整格式的提交
```
feat: 实现AI助手对话功能

- 添加DeepSeek API集成
- 实现消息历史记录
- 支持上下文记忆

Closes #123
```

### 破坏性变更
```
feat!: 重构用户认证系统

BREAKING CHANGE: 移除旧版JWT认证方式，改为OAuth2
```

## 🛠️ 工具配置

### Husky Git Hooks
项目已配置Husky，会在提交时自动检查提交消息格式：
- `pre-commit`: 运行代码检查和格式化
- `commit-msg`: 验证提交消息格式

### 跳过检查 (仅紧急情况)
```bash
git commit --no-verify -m "紧急修复"
```

## 💡 最佳实践

### 1. 保持主题简洁有力
```
✅ feat: 添加任务优先级排序
❌ feat: 我添加了一个功能用来排序任务列表中的任务项
```

### 2. 使用适当的提交类型
```
✅ fix: 修复数据保存失败的问题
❌ feat: 修复了一个bug
```

### 3. 关联相关问题
```
feat: 实现用户反馈系统

- 添加反馈表单组件
- 集成邮件服务

Closes #456
```

### 4. 描述变更影响
```
refactor: 重构状态管理逻辑

- 使用Pinia替代Vuex
- 优化数据流架构
- 提升开发体验
```

## 🤝 团队约定

- 🔄 所有提交必须符合上述规范
- 📝 英文提交消息为主，中文为辅
- 🎯 主题描述应清晰表达变更意图
- 📊 复杂变更应在body中详细说明
- 🏷️ 新功能开发应关联相应issue

## 📞 常见问题

**Q: 提交被拒绝怎么办？**
A: 检查提交消息是否符合格式要求，或使用 `--no-verify` 跳过检查（仅紧急情况）。

**Q: 如何编写好的提交消息？**
A: 主题应简洁明了，body详细说明变更内容和影响。

**Q: 什么时候需要breaking change？**
A: 当变更会破坏现有API或功能时，应在footer中标记BREAKING CHANGE。
